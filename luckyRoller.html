<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lucky Roller</title>
    <!-- Confetti library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');

        body {
            background-color: black;
            color: white;
            font-family: 'Orbitron', sans-serif;
            margin: 0;
            padding: 0;
        }

        footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            text-align: center;
            font-size: 14px;
            color: #888;
            background-color: black;
            padding: 10px 0;
            z-index: 1000;
        }

        .artifacts-button {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .stats {
            text-align: center;
            margin: 80px 20px 20px;
            font-size: 20px;
            line-height: 1.4;
        }

        .event-box {
            width: 300px;
            padding: 12px 16px;
            background: rgba(255, 215, 0, 0.12);
            border: 2px solid #ffd700;
            border-radius: 12px;
            font-size: 16px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            margin-bottom: 12px;
        }

        .event-container {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 999;
            display: flex;
            flex-direction: column;
        }

        .event-box strong {
            font-size: 18px;
        }

        .cool-button {
            display: inline-block;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            text-decoration: none;
            color: #ffffff;
            background: linear-gradient(45deg, #6a11cb 0%, #2575fc 100%);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .cool-button:hover {
            background: linear-gradient(45deg, #5c0cad 0%, #1e64d8 100%);
            transform: translateY(-2px);
        }

        .cool-button:active {
            transform: translateY(1px);
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);
        }

        .cool-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .centered {
            text-align: center;
            margin-top: 60px;
        }

        #result {
            position: absolute;
            top: 240px;
            left: 50%;
            transform: translateX(-50%);
            min-height: 120px;
            width: 90%;
            max-width: 700px;
            text-align: center;
            line-height: 1.3;
            pointer-events: none;
        }

        @keyframes shake {
            0% {
                transform: translate(1px, 1px) rotate(0deg);
            }

            10% {
                transform: translate(-1px, -2px) rotate(-1deg);
            }

            20% {
                transform: translate(-3px, 0px) rotate(1deg);
            }

            30% {
                transform: translate(3px, 2px) rotate(0deg);
            }

            40% {
                transform: translate(1px, -1px) rotate(1deg);
            }

            50% {
                transform: translate(-1px, 2px) rotate(-1deg);
            }

            60% {
                transform: translate(-3px, 1px) rotate(0deg);
            }

            70% {
                transform: translate(3px, 1px) rotate(-1deg);
            }

            80% {
                transform: translate(-1px, -1px) rotate(1deg);
            }

            90% {
                transform: translate(1px, 2px) rotate(0deg);
            }

            100% {
                transform: translate(1px, -2px) rotate(-1deg);
            }
        }

        .shake {
            animation: shake 0.8s cubic-bezier(.36, .07, .19, .97) both;
        }
    </style>
    <script>
        if (!localStorage.getItem("luckyRollerAccess")) {
            const encodedPassword = "bm9kdW1taWVzYWxsb3dlZA==";
            let answer = prompt("Enter the one-time access code to access the lucky roller:");
            while (btoa(answer) !== encodedPassword) {
                answer = prompt("Invalid access code. Try again:");
            }
            let name = prompt("Access granted! Let us know your name. This is a one-time prompt.");
            localStorage.setItem("luckyRollerName", name);
            localStorage.setItem("luckyRollerAccess", true);
        }
        alert("Welcome, " + localStorage.getItem("luckyRollerName"));
    </script>
</head>

<body>
    <h1 style="text-align: center; margin: 40px 0 20px;">Roll for lucky stuff!</h1>

    <a href="artifacts.html" class="cool-button artifacts-button">Artifacts üß™</a>
    <a href="luckyRollerShop.html" class="cool-button"
        style="position: fixed; top: 70px; right: 20px; z-index: 1000;">Shop üõí</a>

    <div class="stats" id="stats">
        Total Rolls: 0<br>Best Luck: None yet!
    </div>

    <!-- Events -->
    <div class="event-container">
        <div class="event-box" id="eventBox" style="border-color:#eaff00; box-shadow:0 0 12px #eaff00; color: #ffd700">
            <strong>SunnyD Citrus Splash! üåûü•§</strong><br>
            Claim 5 FREE SunnyD shards every 24 hours!<br>
            <button id="claimButton" class="cool-button" onclick="claimDailySunnyD()">Claim Now!</button>
        </div>
        <br>
        <div class="event-box" style="border-color:#00ff1a; box-shadow:0 0 12px #00ff1a; color: limegreen">
            <strong>10 Minute Free Chest üì¶</strong><br><br>
            <button id="simpleChestBtn" class="cool-button" onclick="claimChest('simple')">
                Claim Simple Chest (10m)
            </button>
        </div>

        <div class="event-box" style="border-color:#005eff; box-shadow:0 0 12px #005eff; color: #241bd1">
            <strong>4 Hour Free Chest üß∞</strong><br><br>
            <button id="normalChestBtn" class="cool-button" onclick="claimChest('normal')">
                Claim Normal Chest (4h)
            </button>
        </div>

        <div class="event-box" style="border-color:#7b00ff; box-shadow:0 0 14px #7b00ff; color: #9b30ff">
            <strong>24 Hour Free Chest üéÅ</strong><br><br>
            <button id="goodChestBtn" class="cool-button" onclick="claimChest('good')">
                Claim Good Chest (24h)
            </button>
        </div>
    </div>

    <h2 id="result"></h2>

    <div class="centered">
        <button style="margin-top: 200px;" class="cool-button" onclick="roll()">Roll</button>
    </div>

    <footer style="text-align: center; margin-top: 350px; font-size: 14px; color: #888;">
        Version: BETA 7 | Last updated: 2/10/2026 | Made by Techcuber
    </footer>

    <script>
        let effectInterval = null;
        let canRoll = true;

        // Track rolls & best luck
        let totalRolls = parseInt(localStorage.getItem("totalRolls")) || 0;
        let bestLuck = localStorage.getItem("bestLuck") || "None yet!";
        document.getElementById("stats").innerHTML = `Total Rolls: ${totalRolls}<br>Best Luck: ${bestLuck}`;

        function updateStats(newLuck) {
            totalRolls++;
            localStorage.setItem("totalRolls", totalRolls);

            const luckRanks = {
                "Common": 1, "Uncommon": 2, "Rare": 3, "Epic": 4, "Legendary": 5,
                "Mythic": 6, "Unreal": 7, "Godlike": 8, "Alchemy": 9,
                "Cosmic": 10, "Abyssal": 11
            };

            const currentRank = luckRanks[newLuck] || 0;
            const bestRank = luckRanks[bestLuck.split(" ")[0]] || 0;

            if (currentRank > bestRank) {
                bestLuck = newLuck;
                localStorage.setItem("bestLuck", bestLuck);
            }

            document.getElementById("stats").innerHTML = `Total Rolls: ${totalRolls}<br>Best Luck: ${bestLuck}`;
        }

        // Artifacts by rarity
        const commonArtifacts = [
            { name: "Hotdog", key: "hotdogShards" },
            { name: "Cookie", key: "cookieShards" },
            { name: "Burger", key: "burgerShards" }
        ];

        const uncommonArtifacts = [
            { name: "Curry", key: "curryShards" },
            { name: "The Moon", key: "moonShards" }
        ];

        const rareArtifacts = [
            { name: "Earth", key: "earthShards" }
        ];

        const epicArtifacts = [
            { name: "The Sun", key: "sunShards" }
        ];

        const legendaryArtifacts = [
            { name: "Neutron Star", key: "neutronStarShards" }
        ];

        const mythicArtifacts = [
            { name: "White Dwarf Star", key: "whiteDwarfShards" }
        ];

        const unrealArtifacts = [
            { name: "SunnyD", key: "sunnydShards" },
            { name: "Grumpy Cat", key: "grumpyCatShards" }
        ];

        const godlikeArtifacts = [
            { name: "Larry", key: "larryShards" },
            { name: "Duo", key: "duoShards" },
            { name: "1500 Day Duolingo Streak", key: "duoStreakShards" }
        ];

        const alchemyArtifacts = [
            { name: "TON 618", key: "ton618Shards" }
        ];

        const cosmicArtifacts = [
            { name: "Phoenix A", key: "phoenixAShards" }
        ];

        const abyssalArtifacts = []; // add later

        function startGodlikeEffect(text) {
            const blues = ["#e0f7ff", "#b3e5ff", "#80d4ff", "#4fc3ff", "#29b6f6", "#1e88e5", "#1565c0"];
            let index = 0;
            effectInterval = setInterval(() => {
                text.style.color = blues[index];
                index = (index + 1) % blues.length;
            }, 150);
        }

        function startAlchemyEffect(text) {
            const greens = ["#c8facc", "#9be7a1", "#6fdc7a", "#43c653", "#2e9e3f", "#1f7a30", "#145522"];
            let index = 0;
            effectInterval = setInterval(() => {
                text.style.color = greens[index];
                index = (index + 1) % greens.length;
            }, 80);
        }

        function startCosmicEffect(text) {
            const oranges = ["#ff9500", "#ffaa00", "#ffc300", "#ffdd00", "#ffea00", "#fff000", "#ffcc00"];
            let index = 0;
            effectInterval = setInterval(() => {
                text.style.color = oranges[index];
                index = (index + 1) % oranges.length;
            }, 120);
        }

        function startAbyssalEffect(text) {
            const purples = ["#3c096c", "#5a189a", "#7b2cbf", "#9d4edd", "#bd6dd6", "#c77dff", "#7209b7"];
            let index = 0;
            effectInterval = setInterval(() => {
                text.style.color = purples[index];
                index = (index + 1) % purples.length;
            }, 140);
        }

        function shakeScreen(intensity = 1) {
            const amp = intensity * 5;
            document.body.style.transform = `translate(${amp}px, ${amp}px)`;

            const shakeTimes = 12;
            let count = 0;
            const violentShake = setInterval(() => {
                const x = (Math.random() - 0.5) * amp * 2;
                const y = (Math.random() - 0.5) * amp * 2;
                const rot = (Math.random() - 0.5) * intensity * 2;
                document.body.style.transform = `translate(${x}px, ${y}px) rotate(${rot}deg)`;
                count++;
                if (count >= shakeTimes) {
                    clearInterval(violentShake);
                    document.body.style.transform = "translate(0,0) rotate(0deg)";
                }
            }, 60);
        }

        function lockRolls(seconds) {
            canRoll = false;
            const button = document.querySelector("button:not(#claimButton)");
            button.disabled = true;
            button.style.opacity = "0.6";
            button.style.cursor = "not-allowed";
            setTimeout(() => {
                canRoll = true;
                button.disabled = false;
                button.style.opacity = "1";
                button.style.cursor = "pointer";
            }, seconds * 1000);
        }

        function roll() {
            if (!canRoll) return;

            let rollValue = Math.random();
            let text = document.getElementById("result");
            let luckName = "Common";

            if (effectInterval) {
                clearInterval(effectInterval);
                effectInterval = null;
            }

            if (rollValue > 0.5) {
                const artifact = commonArtifacts[Math.floor(Math.random() * commonArtifacts.length)];
                text.innerHTML = `${artifact.name} (Common) 50%`;
                text.style.color = "gray";
                text.style.fontSize = "18px";

                if (Math.random() < 0.5) {
                    localStorage.setItem(artifact.key, (parseInt(localStorage.getItem(artifact.key)) || 0) + 1);
                } else {
                    let commonCredits = parseInt(localStorage.getItem("commonCredits") || "0") + 1;
                    localStorage.setItem("commonCredits", commonCredits);
                    text.innerHTML += "<br>+1 Common Credit!";
                }
                luckName = "Common";

            } else if (rollValue > 0.25) {
                const artifact = uncommonArtifacts[Math.floor(Math.random() * uncommonArtifacts.length)];
                text.innerHTML = `${artifact.name} (Uncommon) 25%`;
                text.style.color = "green";
                text.style.fontSize = "20px";

                if (Math.random() < 0.25) {
                    let uncommonCredits = parseInt(localStorage.getItem("uncommonCredits") || "0") + 1;
                    localStorage.setItem("uncommonCredits", uncommonCredits);
                    text.innerHTML += "<br>+1 Uncommon Credit!";
                } else {
                    localStorage.setItem(artifact.key, (parseInt(localStorage.getItem(artifact.key)) || 0) + 1);
                }
                luckName = "Uncommon";

            } else if (rollValue > 0.15) {
                const artifact = rareArtifacts[Math.floor(Math.random() * rareArtifacts.length)];
                text.innerHTML = `${artifact.name} (Rare) 15%`;
                text.style.color = "blue";
                text.style.fontSize = "22px";
                localStorage.setItem(artifact.key, (parseInt(localStorage.getItem(artifact.key)) || 0) + 1);
                luckName = "Rare";

            } else if (rollValue > 0.08) {
                const artifact = epicArtifacts[Math.floor(Math.random() * epicArtifacts.length)];
                text.innerHTML = `${artifact.name} (Epic) 5%`;
                text.style.color = "purple";
                text.style.fontSize = "24px";
                localStorage.setItem(artifact.key, (parseInt(localStorage.getItem(artifact.key)) || 0) + 1);
                luckName = "Epic";

            } else if (rollValue > 0.04) {
                const artifact = legendaryArtifacts[Math.floor(Math.random() * legendaryArtifacts.length)];
                text.innerHTML = `${artifact.name} (Legendary) 2.5%`;
                text.style.color = "goldenrod";
                text.style.fontSize = "28px";
                localStorage.setItem(artifact.key, (parseInt(localStorage.getItem(artifact.key)) || 0) + 1);
                luckName = "Legendary";

            } else if (rollValue > 0.02) {
                const artifact = mythicArtifacts[Math.floor(Math.random() * mythicArtifacts.length)];
                text.innerHTML = `${artifact.name} (Mythic) 1.5%`;
                text.style.color = "red";
                text.style.fontSize = "32px";
                lockRolls(1);
                localStorage.setItem(artifact.key, (parseInt(localStorage.getItem(artifact.key)) || 0) + 1);
                luckName = "Mythic";

            } else if (rollValue > 0.001) {
                const artifact = unrealArtifacts[Math.floor(Math.random() * unrealArtifacts.length)];
                text.innerHTML = `${artifact.name} (Unreal) 0.9%`;
                text.style.color = "white";
                text.style.fontSize = "36px";
                lockRolls(2);
                localStorage.setItem(artifact.key, (parseInt(localStorage.getItem(artifact.key)) || 0) + 1);
                luckName = "Unreal";


            } else if (rollValue > 0.0001) {
                const artifact = godlikeArtifacts[Math.floor(Math.random() * godlikeArtifacts.length)];
                text.innerHTML = `${artifact.name} (Godlike) 0.1%`;
                text.style.fontSize = "40px";
                startGodlikeEffect(text);
                lockRolls(3);
                localStorage.setItem(artifact.key, (parseInt(localStorage.getItem(artifact.key)) || 0) + 1);
                luckName = "Godlike";
                confetti({ particleCount: 400, spread: 100, origin: { y: 0.6 } });

            } else if (rollValue > 0.00001) {
                const artifact = alchemyArtifacts[Math.floor(Math.random() * alchemyArtifacts.length)];
                text.innerHTML = `${artifact.name} (Alchemy) 0.01%`;
                text.style.fontSize = "44px";
                startAlchemyEffect(text);
                lockRolls(3);
                localStorage.setItem(artifact.key, (parseInt(localStorage.getItem(artifact.key)) || 0) + 1);
                luckName = "Alchemy";
                confetti({ particleCount: 1000, spread: 150, origin: { y: 0.6 } });

            } else if (rollValue > 0.000001) {
                const artifact = cosmicArtifacts[Math.floor(Math.random() * cosmicArtifacts.length)];
                text.innerHTML = `${artifact.name} (Cosmic) 0.001%`;
                text.style.fontSize = "50px";
                startCosmicEffect(text);
                lockRolls(3);
                shakeScreen(5);
                localStorage.setItem(artifact.key, (parseInt(localStorage.getItem(artifact.key)) || 0) + 1);
                luckName = "Cosmic";
                confetti({ particleCount: 2000, spread: 120, origin: { y: 0.6 } });

            } else {
                text.innerHTML = "Abyssal 0.0001%";
                text.style.fontSize = "54px";
                startAbyssalEffect(text);
                lockRolls(3);
                shakeScreen(15);
                luckName = "Abyssal";
                confetti({ particleCount: 2000, spread: 140, origin: { y: 0.6 } });
            }

            updateStats(luckName);
        }

        // Cosmic pulsing orange
        function startCosmicEffect(text) {
            const oranges = ["#ff9500", "#ffaa00", "#ffc300", "#ffdd00", "#ffea00", "#fff000", "#ffcc00"];
            let index = 0;
            effectInterval = setInterval(() => {
                text.style.color = oranges[index];
                index = (index + 1) % oranges.length;
            }, 120);
        }

        // Abyssal pulsing dark purple
        function startAbyssalEffect(text) {
            const purples = ["#3c096c", "#5a189a", "#7b2cbf", "#9d4edd", "#bd6dd6", "#c77dff", "#7209b7"];
            let index = 0;
            effectInterval = setInterval(() => {
                text.style.color = purples[index];
                index = (index + 1) % purples.length;
            }, 140);
        }

        // Violent screen shake
        function shakeScreen(intensity = 1) {
            const amp = intensity * 5;
            document.body.style.transform = `translate(${amp}px, ${amp}px)`;

            const shakeTimes = 12;
            let count = 0;
            const violentShake = setInterval(() => {
                const x = (Math.random() - 0.5) * amp * 2;
                const y = (Math.random() - 0.5) * amp * 2;
                const rot = (Math.random() - 0.5) * intensity * 2;
                document.body.style.transform = `translate(${x}px, ${y}px) rotate(${rot}deg)`;
                count++;
                if (count >= shakeTimes) {
                    clearInterval(violentShake);
                    document.body.style.transform = "translate(0,0) rotate(0deg)";
                }
            }, 60);
        }

        // Daily SunnyD Claim Event
        function claimDailySunnyD() {
            const claimButton = document.getElementById("claimButton");
            const now = Date.now();
            const lastClaimTime = parseInt(localStorage.getItem("lastSunnyDClaimTime")) || 0;

            localStorage.setItem("sunnydShards", (parseInt(localStorage.getItem("sunnydShards")) || 0) + 5);
            localStorage.setItem("lastSunnyDClaimTime", now);
            confetti({ particleCount: 80, spread: 60, origin: { y: 0.7 } });
            alert("SunnyD Citrus Splash! x5 SunnyD shards claimed! üåûü•§");

            startCountdown(claimButton, now + 24 * 60 * 60 * 1000);
        }

        function startCountdown(button, endTime) {
            function updateTimer() {
                const remaining = endTime - Date.now();
                if (remaining <= 0) {
                    button.disabled = false;
                    button.textContent = "Claim Now!";
                    return;
                }
                const hours = Math.floor(remaining / (1000 * 60 * 60));
                const minutes = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((remaining % (1000 * 60)) / 1000);
                button.textContent = `Next claim: ${hours}h ${minutes}m ${seconds}s`;
                button.disabled = true;
            }
            updateTimer();
            setInterval(updateTimer, 1000);
        }

        // Chest System
        const chestData = {
            simple: { cooldown: 10 * 60 * 1000, loot() { let r = Math.floor(Math.random() * 100) + 1; localStorage.setItem("commonCredits", (parseInt(localStorage.getItem("commonCredits")) || 0) + r); return `+${r} Common Credit ‚ö™`; } },
            normal: { cooldown: 4 * 60 * 60 * 1000, loot() { let r = Math.floor(Math.random() * 100) + 1; localStorage.setItem("uncommonCredits", (parseInt(localStorage.getItem("uncommonCredits")) || 0) + r); return `+${r} Uncommon Credit üü¢`; } },
            good: { cooldown: 24 * 60 * 60 * 1000, loot() { let r = Math.floor(Math.random() * 100) + 1; if (Math.random() <= 0.5) { localStorage.setItem("rareCredits", (parseInt(localStorage.getItem("rareCredits")) || 0) + r); return `+${r} Rare Credit üîµ`; } else { localStorage.setItem("sunnydShards", (parseInt(localStorage.getItem("sunnydShards")) || 0) + Math.ceil(r / 30)); return `+${Math.ceil(r / 30)} SunnyD Shards üåûü•§`; } } }
        };

        function claimChest(type) {
            const now = Date.now();
            const last = parseInt(localStorage.getItem(`last_${type}_chest`)) || 0;
            const chest = chestData[type];

            if (now - last < chest.cooldown) return;

            const reward = chest.loot();
            localStorage.setItem(`last_${type}_chest`, now);
            confetti({ particleCount: 80, spread: 70, origin: { y: 0.6 } });
            alert(`Chest opened! üéÅ\n${reward}`);
            updateChestButtons();
        }

        function updateChestButtons() {
            ["simple", "normal", "good"].forEach(type => {
                const btn = document.getElementById(`${type}ChestBtn`);
                if (!btn) return;
                const last = parseInt(localStorage.getItem(`last_${type}_chest`)) || 0;
                const remaining = chestData[type].cooldown - (Date.now() - last);
                if (remaining <= 0) {
                    btn.disabled = false;
                    btn.textContent = type === "simple" ? "Simple Chest (10m)" : type === "normal" ? "Normal Chest (4h)" : "Good Chest (24h)";
                } else {
                    const hours = Math.floor(remaining / (1000 * 60 * 60));
                    const mins = Math.floor((remaining % (1000 * 60 * 60)) / 60000);
                    const secs = Math.floor((remaining % 60000) / 1000);
                    btn.disabled = true;
                    btn.textContent = `Ready in ${hours}h ${mins}m ${secs}s`;
                }
            });
        }

        // Load everything
        window.addEventListener("load", () => {
            const claimButton = document.getElementById("claimButton");
            const lastClaimTime = parseInt(localStorage.getItem("lastSunnyDClaimTime")) || 0;
            const now = Date.now();

            if (now - lastClaimTime < 24 * 60 * 60 * 1000) {
                startCountdown(claimButton, lastClaimTime + 24 * 60 * 60 * 1000);
            } else {
                claimButton.disabled = false;
                claimButton.textContent = "Claim Now!";
            }
            updateChestButtons();
        });

        setInterval(updateChestButtons, 1000);
    </script>
</body>

</html>
